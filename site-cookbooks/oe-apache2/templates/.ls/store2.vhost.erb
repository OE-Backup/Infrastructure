# Automatically generated by Chef
<VirtualHost *:80>
    # this let's apache fetch all of the static content for the application
    # essentially we are aliasing directories that point into the exploded WAR directory of the app
    # this should match the secure VirtualHost entries
    
    ServerAdmin infrastructure@openenglish.com

    # this is where we are forcibly switching from insecure (http) to secure (https)
    RewriteEngine On
    RewriteCond %{HTTPS} !=on
    
    # Setup a reverse proxy using http, rather than ajp so ssl is NOT propagated
    # if ssl is propagated, tomcat will create a secure session cookie rather than
    # an insecure one that can be used over mixed protocols
    ProxyRequests off
    ProxyPass / ajp://localhost:8009/
    ProxyPassReverse / ajp://localhost:8009/

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
